(this["webpackJsonpdoorlooplijn-visualisatie"]=this["webpackJsonpdoorlooplijn-visualisatie"]||[]).push([[0],{12:function(t,e,n){t.exports=n(19)},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),o=n(10),s=n.n(o),l=(n(17),n(11)),c=n(1),a=n(2),h=n(5),u=n(4),f=n(3),v=function(){function t(e,n,i){Object(c.a)(this,t),this.key=e,this.value=n,this.left=null,this.right=null,this.color=i,this.isRed=this.isRed.bind(this)}return Object(a.a)(t,[{key:"free",value:function(){this.left=null,this.right=null}},{key:"isRed",value:function(){return 1===this.color}}]),t}();function p(t){return null!==t&&t.isRed()}var d=function(){function t(){Object(c.a)(this,t),this.root=null,this.size=0,this.free=this.free.bind(this)}return Object(a.a)(t,[{key:"free",value:function(){this.size=0,this.root=null}},{key:"insert",value:function(t,e){this.root=this.put(this.root,t,e),this.root.color=0,this.size++}},{key:"put",value:function(t,e,n){return null==t?new v(e,n,1):(e<t.key?t.left=this.put(t.left,e,n):e>t.key&&(t.right=this.put(t.right,e,n)),p(t.right)&&!p(t.left)&&(t=this.rotateLeft(t)),p(t.left)&&p(t.left.left)&&(t=this.rotateRight(t)),p(t.left)&&p(t.right)&&this.flipColors(t),t)}},{key:"rotateLeft",value:function(t){var e=t.right;return t.right=e.left,e.left=t,e.color=t.color,t.color=1,e}},{key:"rotateRight",value:function(t){var e=t.left;return t.left=e.right,e.right=t,e.color=t.color,t.color=1,e}},{key:"flipColors",value:function(t){t.color=1,t.left.color=0,t.right.color=0}},{key:"nnearest",value:function(t){return null===this.root?[null,null]:[this.up(t),this.down(t)]}},{key:"up",value:function(t){return this.upUtil(t,this.root,null)}},{key:"upUtil",value:function(t,e,n){var i=null;return t===e.key?null===(i=this.leftmost(e.right))?n:i:t<e.key?this.upUtil(t,e.left,e):this.upUtil(t,e.right,n)}},{key:"down",value:function(t){return this.downUtil(t,this.root,null)}},{key:"downUtil",value:function(t,e,n){var i=null;return t===e.key?null===(i=this.rightmost(e.left))?n:i:t>e.key?this.downUtil(t,e.right,e):this.downUtil(t,e.left,n)}},{key:"leftmost",value:function(t){if(null===t)return null;for(var e=t;null!==e.left;)e=e.left;return e}},{key:"rightmost",value:function(t){if(null===t)return null;for(var e=t;null!==e.right;)e=e.right;return e}}]),t}();function k(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}n(18);var x=n(8),g=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).nodeRef=null,i.setNodeRef=function(e){i.nodeRef=e,t.contextRef(e.getContext("2d"))},i.clickHandler=function(e){t.onClick&&t.onClick(e,i.nodeRef)},i}return Object(a.a)(n,[{key:"render",value:function(){return r.a.createElement("canvas",{onClick:this.clickHandler,width:this.props.width,height:this.props.height,ref:this.setNodeRef})}}]),n}(r.a.Component),y=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).setContext=i.setContext.bind(Object(x.a)(i)),i}return Object(a.a)(n,[{key:"setContext",value:function(t){this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var t=this,e=this.props,n=e.points,i=e.current;this.ctx.save(),this.ctx.beginPath(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle="#4397AC",n.map((function(e){t.ctx.fillText("["+String(e.x)+","+String(e.y)+"]",e.x+10+2,e.y+10),t.ctx.fillRect(e.x,e.y,10,10)}));var r=this.props.closestPair,o=r.first,s=r.second,l=r.distance;if(i>=0&&i<n.length){var c=n[i];this.ctx.beginPath(),this.ctx.moveTo(c.x+5,0),this.ctx.lineTo(c.x+5,this.height),this.ctx.stroke(),null!==o&&(console.log("drawing delta"),this.ctx.strokeStyle="#00FF00",this.props.showHorStroke&&(this.ctx.beginPath(),this.ctx.moveTo(0,c.y+5-l),this.ctx.lineTo(this.width,c.y+5-l),this.ctx.moveTo(0,c.y+5+l),this.ctx.lineTo(this.width,c.y+5+l),this.ctx.stroke()),this.props.showVertStroke&&(this.ctx.beginPath(),this.ctx.strokeStyle="#00ff00",this.ctx.moveTo(c.x+5-l,0),this.ctx.lineTo(c.x+5-l,this.height),this.ctx.stroke(),this.ctx.moveTo(c.x+5+l,0),this.ctx.lineTo(c.x+5+l,this.height),this.ctx.stroke()))}null!==o&&(this.ctx.beginPath(),this.ctx.moveTo(o.x+5,o.y+5),this.ctx.lineTo(s.x+5,s.y+5),this.ctx.setLineDash([10,5]),this.ctx.lineWidth=2,this.ctx.strokeStyle="#FF0000",this.ctx.stroke(),this.ctx.fillStyle="#FF0000",this.ctx.fillText("Closest pair "+String(Math.round(l)),s.x+5,s.y-10)),this.ctx.restore()}},{key:"render",value:function(){return r.a.createElement(g,{height:"500",width:"800",onClick:this.props.onClick,contextRef:this.setContext})}}]),n}(r.a.Component);var b=function(t){var e=Object(i.useState)(null),n=Object(f.a)(e,2),o=n[0],s=n[1],l=function e(n,i,r,s){var l=Math.ceil(Math.log2(t.tree.current.size));o.beginPath(),o.arc(n,i,25,0,2*Math.PI),o.strokeStyle=0===r.color?"#000000":"#FF0000",o.stroke(),o.fillText(String(r.key),n-10,i+5),null!==r.left&&e(n-30*(l-s),i+55,r.left,s+1),null!==r.right&&e(n+30*(l-s),i+55,r.right,s+1)};return Object(i.useEffect)((function(){if(null!==o)return o.save(),o.beginPath(),o.clearRect(0,0,"800","500"),null!==t.tree.current.root&&l(400,55,t.tree.current.root,0),function(){o.clearRect(0,0,"800","500")}}),[t.tree.current.size]),r.a.createElement(g,{height:"500",width:"800",contextRef:s})};var m,w=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).canvasClick=function(t,e){if(!i.state.started){var n=e.getBoundingClientRect(),r=t.clientX-Math.round(n.left)-10,o=t.clientY-n.top-10;i.props.setPoints([].concat(Object(l.a)(i.props.points),[{x:r,y:o}]).sort((function(t,e){return t.x-e.x})))}},i.nexButtonClick=function(t){i.props.step(),i.setState((function(t){return{treeChanged:!t.treeChanged,started:!0}}))},i.resetButtonClick=function(t){i.props.reset(),i.setState((function(t){return{started:!1,treeChanged:!t.treeChanged}}))},i.state={started:!1,treeChanged:!1,showVertStroke:!1,showHorStroke:!1},i}return Object(a.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement(y,{onClick:this.canvasClick,points:this.props.points,current:this.props.currentIndex,closestPair:this.props.closestPair,showHorStroke:this.state.showHorStroke,showVertStroke:this.state.showVertStroke}),r.a.createElement("div",{className:"VisualizerControls"},r.a.createElement("button",{onClick:this.nexButtonClick,disabled:this.props.currentIndex===this.props.points.length-1},"Next"),r.a.createElement("button",{onClick:this.resetButtonClick},"RESET"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"Show hor stroke",onChange:function(){t.setState((function(t){return{showHorStroke:!t.showHorStroke}}))}}),"Show hor stroke"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:"Show ver stroke",onChange:function(){t.setState((function(t){return{showVertStroke:!t.showVertStroke}}))}}),"Show ver stroke")),r.a.createElement(b,{tree:this.props.status}))}}]),n}(r.a.Component),S=(m=w,function(t){var e=function(){var t=Object(i.useRef)(new d),e=Object(i.useState)([]),n=Object(f.a)(e,2),r=n[0],o=n[1],s=Object(i.useState)({first:null,second:null,distance:Number.MAX_SAFE_INTEGER}),l=Object(f.a)(s,2),c=l[0],a=l[1],h=Object(i.useState)(-1),u=Object(f.a)(h,2),v=u[0],p=u[1];return[t,c,function(){var e=v+1;p(e);var n=r[e];t.current.insert(n.y,n);var i=t.current.nnearest(n.y);console.log(i);var o=i.filter((function(t){return null!==t&&k(n,t.value)<c.distance})).sort((function(t,e){return k(t.value,n)-k(e.value,n)}));console.log(o),o.length>0&&a({first:n,second:o[0].value,distance:k(n,o[0].value)})},v,o,function(){t.current.free(),p(-1),a({first:null,second:null,distance:Number.MAX_SAFE_INTEGER}),o([])},r]}(),n=Object(f.a)(e,7),o=n[0],s=n[1],l=n[2],c=n[3],a=n[4],h=n[5],u=n[6];return r.a.createElement(m,Object.assign({},t,{status:o,closestPair:s,step:l,currentIndex:c,setPoints:a,reset:h,points:u}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.0c7e20ff.chunk.js.map